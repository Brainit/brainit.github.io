---
date: 2017-04-04 14:16:17+00:00
layout: post
title: 图像矩阵缩放，插值算法
categories: Emulate
tags: Emulate Image
---

### 目录
1. [背景介绍](#item1)
2. [变量说明](#item2)
3. [最近邻插值](#item3)
4. [双线性插值](#item4)

---
#### <span id="item1">背景介绍</span>
> * 最近做图像处理，java中用BufferedImage操作图像，可以实现图像缩放，android中使用Bitmap也可以实现图像的缩放，而android中不能使用java.awt包，为了实现双平台兼容，所以需要自己写算法操作图像矩阵，我将使用java做最近邻插值和双线性插值的仿真及比较
图像缩放的重要问题在于新图像中每个像素点和原图中的像素的对应关系

#### <span id="item2">变量说明</span>
> * 假设原图宽高分别为w h;
> * 缩放目标图像狂傲分别为W H;
> * 缩放比例分别为 W/w  H/h;

#### <span id="item3">最近邻插值</span>
> * 最近邻插值不考虑环境关系，直接用最近邻的像素作为新图中对应位置的像素
* 假设我们需要找新图中X，Y位置上的像素，
其中W>X>=0; H>Y>=0
则对应到原图中x，y
x = X/(W/w);
y = Y/(H/h);
* 其中一个重要问题是x，y是浮点型的数据，而在图像中，这是不可能的
* 最近邻插值的思想就是：如果x-[x] > [x]+1 -x  ,其中[x]为x的取整，则x = [x]+1 ,  否则x = [x];
* 对y的操作也是一样，直至找到所有像素点的对应关系

#### <span id="item4">双线性插值</span>
> * 双线性插值考虑环境关系，考虑原图中对应位置周围的四个点的像素信息
* 假设我们需要找新图中X，Y位置上的像素，其中W>X>=0,H>Y>=0
* f(X, Y)表示图像中的像素信息，则对应到原图中x，y
    x = X/(W/w);
    y = Y/(H/h);
* 我们考虑这样四个点
    ([x],[y])    ([x]+1,[y])
    ([x],[y]+1)  ([x]+1,[y]+1)
则
    f(X,Y) = (x-[x])(x-[y])f([x],[y])+([x]+1-x)([y]-y)f([x]+1,[y])+(x-[x])([y]+1-y)f([x],[y]+1)+([x]+1-x)([y]+1-y)f([x]+1,[y]+1)
* 因为考虑浮点位置于原图周围4个点的距离加以权重，较为真实的还原了原图信息

---